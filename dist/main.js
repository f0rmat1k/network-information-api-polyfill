!function(n){var e={};function t(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(o,i,function(e){return n[e]}.bind(null,i));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function i(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function r(n,e,t,o,i,r,a){try{var u=n[r](a),c=u.value}catch(n){return void t(n)}u.done?e(c):Promise.resolve(c).then(o,i)}function a(n){return function(){var e=this,t=arguments;return new Promise(function(o,i){var a=n.apply(e,t);function u(n){r(a,o,i,u,c,"next",n)}function c(n){r(a,o,i,u,c,"throw",n)}u(void 0)})}}!function(){var t={pingMaxTimeout:5e3,pingFrequency:6e3,pingUrl:"".concat(location.protocol,"//network-information-api.surge.sh/1b.txt")};function r(n){return new Promise(function(){var e=a(regeneratorRuntime.mark(function e(t,o){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection,!Boolean(navigator.connection)){e.next=3;break}return e.abrupt("return",t(navigator.connection));case 3:i=new u(n,{onInit:function(n){navigator.connection=Object.assign(n,{addEventListener:function(n,e){"change"===n&&i.onChangeAddCb(e)},removeEventListener:function(n,e){"change"===n&&i.onChangeRemoveCb(e)}}),t(navigator.connection)}});case 4:case"end":return e.stop()}},e,this)}));return function(n,t){return e.apply(this,arguments)}}())}var u=function(){function n(e,o){if(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=Object.assign({},t,e),this.events=o,this.onChangeFns=[],this.options.pingFrequency-this.options.pingMaxTimeout<300)throw new Error("Too little difference between pingFrequency and pingMaxTimeout.Difference must be more than 300ms.");this.prevStatus={},this.ping()}var e,o,r;return e=n,(o=[{key:"onChangeAddCb",value:function(n){-1===this.onChangeFns.indexOf(n)&&this.onChangeFns.push(n)}},{key:"onChangeRemoveCb",value:function(n){var e=this.onChangeFns.indexOf(n);-1!==e&&this.onChangeFns.splice(e,1)}},{key:"onChangeExecCbs",value:function(n){var e=!0,t=!1,o=void 0;try{for(var i,r=this.onChangeFns[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){(0,i.value)(n)}}catch(n){t=!0,o=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw o}}}},{key:"ping",value:function(){var n=a(regeneratorRuntime.mark(function n(){var e,t,o,i,r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return setTimeout(function(){r.ping()},this.options.pingFrequency),n.next=3,this.makeRequest();case 3:e=n.sent,console.log(e),t={type:"cellular",saveData:!1},o=null,o=e<=1200?{effectiveType:"4g",rtt:300,downlink:1.7}:e<=2e3?{effectiveType:"3g",rtt:500,downlink:.5}:e<=3e3?{effectiveType:"2g",rtt:1500,downlink:.4}:e<=this.options.pingMaxTimeout?{effectiveType:"slow-2g",rtt:3e3,downlink:.2}:{effectiveType:"4g",rtt:300,downlink:1.7,type:"none"},i=Object.assign(t,o),this.prevStatus.effectiveType?this.prevStatus.effectiveType===i.effectiveType&&this.prevStatus.type===i.type||this.onChangeExecCbs(i):this.events.onInit&&this.events.onInit(i),this.prevStatus=i;case 11:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()},{key:"makeRequest",value:function(){var n=this;return new Promise(function(e){var t=new XMLHttpRequest,o=setTimeout(function(){t.abort(),console.warn("network information api polyfill: max ping timeout exceed"),e(n.options.pingMaxTimeout+1)},n.options.pingMaxTimeout),i=n.options.pingUrl;i+=-1!==i.indexOf("?")?"&":"?",i+="v".concat(Math.random(),"=").concat(Math.random()),t.open("GET",i,!0),t.send();var r=new Date;t.onreadystatechange=function(){if(4===t.readyState)if(clearTimeout(o),t.status>=200&&t.status<=299){var i=new Date-r;e(i)}else console.warn("network information api polyfill: trouble with network. status: ".concat(t.status)),e(n.options.pingMaxTimeout+1)}})}}])&&i(e.prototype,o),r&&i(e,r),n}();"undefined"!=typeof window&&(window.NetworkInformationApiPolyfill=r),"object"===o(e)&&(n.exports=r)}()}]);